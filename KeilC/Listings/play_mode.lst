C51 COMPILER V9.60.7.0   PLAY_MODE                                                         10/15/2025 00:31:57 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE PLAY_MODE
OBJECT MODULE PLACED IN .\Objects\play_mode.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE include\play_mode\play_mode.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\include;
                    -.\include\delay;.\include\play_mode;.\include\uart_init) DEBUG OBJECTEXTEND PRINT(.\Listings\play_mode.lst) TABS(2) OBJE
                    -CT(.\Objects\play_mode.obj)

line level    source

   1          #include <REGX51.H>
   2          #include "uart_init.h"
   3          #include "delay.h"
   4          #include "play_mode.h"
   5          
   6          void play_mode(unsigned char *x, unsigned char *y, unsigned char *z) {
   7   1          bit coinEnable = 1;
   8   1          unsigned char buttonState = 0;
   9   1          
  10   1          while (coinEnable) {
  11   2              buttonState = P2 | 0xE0; 
  12   2              /*0xE0 = 1110 0000
  13   2                khi OR voi 0xE0 thì P2.5–P2.7 luôn = 1
  14   2                chi doc cac bit thap P2.0–P2.4 de kiem tra nut nhan
  15   2              */
  16   2      
  17   2              switch (buttonState) {
  18   3                  case 0xFE: //up (P2.0 = 0)
  19   3                      if ((*y) <= 253) (*y) += 1;
  20   3                      delay(10);
  21   3                      break;
  22   3      
  23   3                  case 0xFD: //down(P2.1 = 0)
  24   3                      if ((*y) >= 2) (*y) -= 1;
  25   3                      delay(10);
  26   3                      break;
  27   3      
  28   3                  case 0xFB: //left (P2.2 = 0)
  29   3                      if ((*x) >= 2) (*x) -= 1;
  30   3                      delay(10);
  31   3                      break;
  32   3      
  33   3                  case 0xF7: //right (P2.3 = 0)
  34   3                      if ((*x) <= 253) (*x) += 1;
  35   3                      delay(10);
  36   3                      break;
  37   3      
  38   3                  default:
  39   3                      break;
  40   3              } 
  41   2      
  42   2              //drop (P2.4 = 0)
  43   2              if (buttonState == 0xEF) {
  44   3                  delay(30);
  45   3                  buttonState = P2 | 0xE0;
  46   3      
  47   3                  if (buttonState == 0xEF) {
  48   4                      unsigned char i;
  49   4                      for (i = 0; i < 254; i++) {
  50   5                          if ((*z) <= 245) (*z) += 1;
  51   5                          delay(10);
  52   5                      }
  53   4                      coinEnable = 0; //thoat khoi vong lap, ham ket thuc
C51 COMPILER V9.60.7.0   PLAY_MODE                                                         10/15/2025 00:31:57 PAGE 2   

  54   4                  }
  55   3              }
  56   2          }
  57   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    190    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      11
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
